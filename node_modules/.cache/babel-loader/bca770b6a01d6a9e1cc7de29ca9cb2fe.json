{"ast":null,"code":"var _jsxFileName = \"/Users/paris/Desktop/React-3D-Haapi/src/App.js\";\nimport * as THREE from \"three\";\nimport React, { useState, useEffect, Suspense } from \"react\";\nimport { OrbitControls } from \"drei\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.css\";\nimport logo from \"./haapi.svg\";\nlet FrontRightLatch;\nlet RearRightLatch;\nlet FrontLeftLatch;\nlet RearLeftLatch;\n\nfunction reqUnlock() {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"click\", reqUnlock);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Unlock\");\n  oReq.send();\n} // function reqLock () {\n//   var oReq = new XMLHttpRequest();\n//   oReq.addEventListener(\"load\", reqLock);\n//   oReq.open(\"GET\", \"http://live.canbushack.com/command/Lock\");\n//   oReq.send();\n// }\n// function reqStart () {\n//   var oReq = new XMLHttpRequest();\n//   oReq.addEventListener(\"load\", reqStart);\n//   oReq.open(\"GET\", \"http://live.canbushack.com/command/Start Vehicle\");\n//   oReq.send();\n// }\n\n\nfunction Tesla() {\n  const gltf = useLoader(GLTFLoader, \"/tesla-w-animations.gltf\");\n  gltf.scene.scale.set(0.005, 0.005, 0.005);\n  let mixer;\n  let animations;\n  let partA; // FRONT RIGHT\n\n  let partB; // REAR RIGHT \n\n  let partC; // FRONT LEFT \n\n  let partD; // REAR LEFT\n\n  animations = gltf.animations;\n  mixer = new THREE.AnimationMixer(gltf.scene); // console.log(animations)\n\n  useFrame((state, delta) => {\n    const clipA = animations[4]; // FRONT RIGHT \n\n    const clipB = animations[5]; // REAR RIGHT \n\n    const clipC = animations[2]; // FRONT RIGHT \n\n    const clipD = animations[3]; // REAR RIGHT \n\n    partA = mixer.clipAction(clipA);\n\n    if (FrontRightLatch === \"LATCH_OPENED\") {\n      partA.paused = false;\n      partA.timeScale = 1;\n      partA.setLoop(THREE.LoopOnce);\n      partA.clampWhenFinished = true;\n      partA.play();\n    } else if (FrontRightLatch === \"LATCH_CLOSED\") {\n      partA.paused = false;\n      partA.timeScale = -1;\n      partA.setLoop(THREE.LoopOnce);\n      partA.clampWhenFinished = true;\n      partA.play();\n    }\n\n    partB = mixer.clipAction(clipB);\n\n    if (RearRightLatch === \"LATCH_OPENED\") {\n      partB.paused = false;\n      partB.timeScale = 1;\n      partB.setLoop(THREE.LoopOnce);\n      partB.clampWhenFinished = true;\n      partB.play();\n    } else if (RearRightLatch === \"LATCH_CLOSED\") {\n      partB.paused = false;\n      partB.timeScale = -1;\n      partB.setLoop(THREE.LoopOnce);\n      partB.clampWhenFinished = true;\n      partB.play();\n    }\n\n    partC = mixer.clipAction(clipC);\n\n    if (FrontLeftLatch === \"LATCH_OPENED\") {\n      partC.paused = false;\n      partC.timeScale = 1;\n      partC.setLoop(THREE.LoopOnce);\n      partC.clampWhenFinished = true;\n      partC.play();\n    } else if (FrontLeftLatch === \"LATCH_CLOSED\") {\n      partC.paused = false;\n      partC.timeScale = -1;\n      partC.setLoop(THREE.LoopOnce);\n      partC.clampWhenFinished = true;\n      partC.play();\n    }\n\n    partD = mixer.clipAction(clipD);\n\n    if (RearLeftLatch === \"LATCH_OPENED\") {\n      partD.paused = false;\n      partD.timeScale = 1;\n      partD.setLoop(THREE.LoopOnce);\n      partD.clampWhenFinished = true;\n      partD.play();\n    } else if (RearLeftLatch === \"LATCH_CLOSED\") {\n      partD.paused = false;\n      partD.timeScale = -1;\n      partD.setLoop(THREE.LoopOnce);\n      partD.clampWhenFinished = true;\n      partD.play();\n    } //Update\n\n\n    mixer.update(delta);\n  });\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    position: [0, 0, 0],\n    object: gltf.scene,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 10\n    }\n  });\n}\n\nfunction Scene() {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"ambientLight\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    intensity: 0.6,\n    position: [0, 10, 4],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Suspense, {\n    fallback: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tesla, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(OrbitControls, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction App() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // console.log('This will run every second!');\n      Promise.all([fetch('http://live.canbushack.com/db_get/259/'), // Right Side Doors\n      fetch('http://live.canbushack.com/db_get/258/') // Left Side Doors\n      ]).then(function (responses) {\n        // Get a JSON object from each of the responses\n        return Promise.all(responses.map(function (response) {\n          return response.json();\n        }));\n      }).then(function (data) {\n        FrontRightLatch = data[0]['VCRIGHT_frontLatchStatus']['enumerated_value'];\n        RearRightLatch = data[0]['VCRIGHT_rearLatchStatus']['enumerated_value'];\n        FrontLeftLatch = data[1]['VCLEFT_frontLatchStatus']['enumerated_value'];\n        RearLeftLatch = data[1]['VCLEFT_rearLatchStatus']['enumerated_value']; // console.log(data)\n      }).catch(error => {\n        console.error(\"Error fetching data: \", error);\n        setError(error);\n      }).finally(() => {\n        setLoading(false);\n      });\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n  if (loading) return \"Application Loading...\";\n  if (error) return \"Error!\";\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"App-logo\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container-md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: reqUnlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 5\n    }\n  }, \"Unlock\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: reqLock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 5\n    }\n  }, \"Lock\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: reqStart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 5\n    }\n  }, \"Remote Start\")), /*#__PURE__*/React.createElement(Canvas, {\n    camera: {\n      position: [-5.10923594025578253, 2.3585518996952866, -5.686206208293889],\n      near: 0.5,\n      far: 2000,\n      fov: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Scene, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/paris/Desktop/React-3D-Haapi/src/App.js"],"names":["THREE","React","useState","useEffect","Suspense","OrbitControls","GLTFLoader","Canvas","useFrame","useLoader","FrontRightLatch","RearRightLatch","FrontLeftLatch","RearLeftLatch","reqUnlock","oReq","XMLHttpRequest","addEventListener","open","send","Tesla","gltf","scene","scale","set","mixer","animations","partA","partB","partC","partD","AnimationMixer","state","delta","clipA","clipB","clipC","clipD","clipAction","paused","timeScale","setLoop","LoopOnce","clampWhenFinished","play","update","Scene","App","loading","setLoading","error","setError","interval","setInterval","Promise","all","fetch","then","responses","map","response","json","data","catch","console","finally","clearInterval","logo","reqLock","reqStart","position","near","far","fov"],"mappings":"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","sourcesContent":["import * as THREE from \"three\";\nimport React, { useState, useEffect, Suspense } from \"react\";\nimport { OrbitControls } from \"drei\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.css\";\nimport logo from \"./haapi.svg\"\n\n\nlet FrontRightLatch;\nlet RearRightLatch;\nlet FrontLeftLatch;\nlet RearLeftLatch;\n\n\nfunction reqUnlock () {\n  \n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"click\", reqUnlock);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Unlock\");\n  oReq.send();\n  \n\n}\n\n// function reqLock () {\n//   var oReq = new XMLHttpRequest();\n//   oReq.addEventListener(\"load\", reqLock);\n//   oReq.open(\"GET\", \"http://live.canbushack.com/command/Lock\");\n//   oReq.send();\n\n// }\n\n\n// function reqStart () {\n//   var oReq = new XMLHttpRequest();\n//   oReq.addEventListener(\"load\", reqStart);\n//   oReq.open(\"GET\", \"http://live.canbushack.com/command/Start Vehicle\");\n//   oReq.send();\n\n// }\n\n\nfunction Tesla() {\n  const gltf = useLoader(GLTFLoader, \"/tesla-w-animations.gltf\");\n  gltf.scene.scale.set(0.005, 0.005, 0.005)\n  \n  let mixer\n  let animations\n  let partA // FRONT RIGHT\n  let partB // REAR RIGHT \n  let partC // FRONT LEFT \n  let partD  // REAR LEFT\n  \n\n\n        animations = gltf.animations\n        mixer = new THREE.AnimationMixer(gltf.scene);\n        // console.log(animations)\n       \n    \n\n    useFrame((state, delta) => {\n\n      const clipA = animations[ 4 ] // FRONT RIGHT \n      const clipB = animations[ 5 ] // REAR RIGHT \n      const clipC = animations[ 2 ] // FRONT RIGHT \n      const clipD = animations[ 3 ] // REAR RIGHT \n      \n\n      partA = mixer.clipAction(clipA)\n      if(FrontRightLatch === \"LATCH_OPENED\"){\n        partA.paused = false;\n        partA.timeScale = 1;\n        partA.setLoop(THREE.LoopOnce);\n        partA.clampWhenFinished = true;\n        partA.play()\n      }\n      else if(FrontRightLatch === \"LATCH_CLOSED\"){\n        partA.paused = false;\n        partA.timeScale = -1;\n        partA.setLoop(THREE.LoopOnce);\n        partA.clampWhenFinished = true;\n        partA.play()\n      }\n\n      partB = mixer.clipAction(clipB)\n      if(RearRightLatch === \"LATCH_OPENED\"){\n        partB.paused = false;\n        partB.timeScale = 1;\n        partB.setLoop(THREE.LoopOnce);\n        partB.clampWhenFinished = true;\n        partB.play()\n      }\n      else if(RearRightLatch === \"LATCH_CLOSED\"){\n        partB.paused = false;\n        partB.timeScale = -1;\n        partB.setLoop(THREE.LoopOnce);\n        partB.clampWhenFinished = true;\n        partB.play()\n      }\n\n      partC = mixer.clipAction(clipC)\n      if(FrontLeftLatch === \"LATCH_OPENED\"){\n        partC.paused = false;\n        partC.timeScale = 1;\n        partC.setLoop(THREE.LoopOnce);\n        partC.clampWhenFinished = true;\n        partC.play()\n      }\n      else if(FrontLeftLatch === \"LATCH_CLOSED\"){\n        partC.paused = false;\n        partC.timeScale = -1;\n        partC.setLoop(THREE.LoopOnce);\n        partC.clampWhenFinished = true;\n        partC.play()\n      }\n\n      partD = mixer.clipAction(clipD)\n      if(RearLeftLatch === \"LATCH_OPENED\"){\n        partD.paused = false;\n        partD.timeScale = 1;\n        partD.setLoop(THREE.LoopOnce);\n        partD.clampWhenFinished = true;\n        partD.play()\n      }\n      else if(RearLeftLatch === \"LATCH_CLOSED\"){\n        partD.paused = false;\n        partD.timeScale = -1;\n        partD.setLoop(THREE.LoopOnce);\n        partD.clampWhenFinished = true;\n        partD.play()\n      }\n\n      \n\n      //Update\n        mixer.update(delta)\n    })\n\n  return <primitive position ={[0, 0, 0]} object={gltf.scene} />;\n}\n\n\nfunction Scene() {\n  return (\n    <>\n      <ambientLight />\n      <pointLight intensity={0.6} position={[0, 10, 4]} />\n      <Suspense fallback={null}>\n      \n        <Tesla />\n        \n      </Suspense>\n      <OrbitControls />\n\n      \n    </>\n  );\n}\n\n\nfunction App() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  \n  useEffect(() => {\n    \n    const interval = setInterval(() => {\n      // console.log('This will run every second!');\n   \n    \n\n    Promise.all([\n      fetch('http://live.canbushack.com/db_get/259/'), // Right Side Doors\n      fetch('http://live.canbushack.com/db_get/258/') // Left Side Doors\n\n      \n      \n  ]).then(function (responses) {\n      // Get a JSON object from each of the responses\n      return Promise.all(responses.map(function (response) {\n          return response.json() ;\n          \n          \n      }))\n  \n      \n  })\n\n  \n  \n  .then(function (data) {\n    FrontRightLatch = data[0]['VCRIGHT_frontLatchStatus']['enumerated_value']\n    RearRightLatch = data[0]['VCRIGHT_rearLatchStatus']['enumerated_value']\n    FrontLeftLatch = data[1]['VCLEFT_frontLatchStatus']['enumerated_value']\n    RearLeftLatch = data[1]['VCLEFT_rearLatchStatus']['enumerated_value']\n    // console.log(data)\n    \n  })\n\n\n\n    .catch((error) => {\n    console.error(\"Error fetching data: \", error);\n    setError(error);\n    })\n    .finally(() => {\n    setLoading(false);\n    })}, 1000);\n  \n    return () => clearInterval(interval);\n    }, []);\n    if (loading) return \"Application Loading...\";\n    if (error) return \"Error!\";\n\n    \n  \n\n return (\n    <>\n    \n    <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n    <div id=\"container-md\">\n    <button className =\"btn btn-primary\" onClick={reqUnlock}>Unlock</button>\n    <button type=\"button\" className =\"btn btn-primary\" onClick={reqLock}>Lock</button>\n    <button type=\"button\" className =\"btn btn-primary\" onClick={reqStart}>Remote Start</button>\n\n  </div>\n      <Canvas \n       camera={{\n          position: [-5.10923594025578253, 2.3585518996952866, -5.686206208293889],\n          near: 0.5,\n          far: 2000,\n          fov: 25,\n\n         \n         \n        }}\n        >\n   \n       \n        <Scene />\n      </Canvas>\n\n    \n     </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}