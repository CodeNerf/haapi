{"ast":null,"code":"import _slicedToArray from\"/Users/paris/Documents/canbushack/haapi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as THREE from\"three\";import React,{useState,useEffect,Suspense}from\"react\";import{OrbitControls}from\"drei\";import{GLTFLoader}from\"three/examples/jsm/loaders/GLTFLoader\";import{Canvas,useFrame,useLoader}from\"react-three-fiber\";import'bootstrap/dist/css/bootstrap.min.css';import\"./App.css\";import logo from\"./haapi.svg\";import LoadingScreen from'react-loading-screen';var FrontRightLatch;var RearRightLatch;var FrontLeftLatch;var RearLeftLatch;var trunkLatchStatus;function reqUnlock(){var oReq=new XMLHttpRequest();oReq.addEventListener(\"load\",reqUnlock);oReq.open(\"GET\",\"http://live.canbushack.com/command/Unlock\");oReq.send();}function reqLock(){var oReq=new XMLHttpRequest();oReq.addEventListener(\"load\",reqLock);oReq.open(\"GET\",\"http://live.canbushack.com/command/Lock\");oReq.send();}function reqStart(){var oReq=new XMLHttpRequest();oReq.addEventListener(\"load\",reqStart);oReq.open(\"GET\",\"http://live.canbushack.com/command/Start Vehicle\");oReq.send();}function reqTrunk(){var oReq=new XMLHttpRequest();oReq.addEventListener(\"load\",reqTrunk);oReq.open(\"GET\",\"http://live.canbushack.com/command/Trunk\");oReq.send();}function Tesla(){var gltf=useLoader(GLTFLoader,\"/tesla-w-animations.gltf\");gltf.scene.scale.set(0.005,0.005,0.005);var mixer;var animations;var partA;// FRONT RIGHT\nvar partB;// REAR RIGHT \nvar partC;// FRONT LEFT \nvar partD;// REAR LEFT\nvar partE;// TRUNK \nanimations=gltf.animations;mixer=new THREE.AnimationMixer(gltf.scene);// console.log(animations)\nuseFrame(function(state,delta){var clipA=animations[4];// FRONT RIGHT \nvar clipB=animations[5];// REAR RIGHT \nvar clipC=animations[2];// FRONT RIGHT \nvar clipD=animations[3];// REAR RIGHT \nvar clipE=animations[1];// TRUNK\npartA=mixer.clipAction(clipA);if(FrontRightLatch===\"LATCH_OPENED\"){partA.paused=false;partA.timeScale=1;partA.setLoop(THREE.LoopOnce);partA.clampWhenFinished=true;partA.play();}else if(FrontRightLatch===\"LATCH_CLOSED\"){partA.paused=false;partA.timeScale=-1;partA.setLoop(THREE.LoopOnce);partA.clampWhenFinished=true;partA.play();}partB=mixer.clipAction(clipB);if(RearRightLatch===\"LATCH_OPENED\"){partB.paused=false;partB.timeScale=-1;partB.setLoop(THREE.LoopOnce);partB.clampWhenFinished=true;partB.play();}else if(RearRightLatch===\"LATCH_CLOSED\"){partB.paused=false;partB.timeScale=-1;partB.setLoop(THREE.LoopOnce);partB.clampWhenFinished=true;partB.play();}partC=mixer.clipAction(clipC);if(FrontLeftLatch===\"LATCH_OPENED\"){partC.paused=false;partC.timeScale=1;partC.setLoop(THREE.LoopOnce);partC.clampWhenFinished=true;partC.play();}else if(FrontLeftLatch===\"LATCH_CLOSED\"){partC.paused=false;partC.timeScale=-1;partC.setLoop(THREE.LoopOnce);partC.clampWhenFinished=true;partC.play();}partD=mixer.clipAction(clipD);if(RearLeftLatch===\"LATCH_OPENED\"){partD.paused=false;partD.timeScale=1;partD.setLoop(THREE.LoopOnce);partD.clampWhenFinished=true;partD.play();}else if(RearLeftLatch===\"LATCH_CLOSED\"){partD.paused=false;partD.timeScale=-1;partD.setLoop(THREE.LoopOnce);partD.clampWhenFinished=true;partD.play();}partE=mixer.clipAction(clipE);if(trunkLatchStatus===\"LATCH_OPENED\"){partE.paused=false;partE.timeScale=1;partE.setLoop(THREE.LoopOnce);partE.clampWhenFinished=true;partE.play();}else if(trunkLatchStatus===\"LATCH_CLOSED\"){partE.paused=false;partE.timeScale=-1;partE.setLoop(THREE.LoopOnce);partE.clampWhenFinished=true;partE.play();}//Update\nmixer.update(delta);});return/*#__PURE__*/React.createElement(\"primitive\",{position:[0,0,0],object:gltf.scene});}function Scene(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"ambientLight\",null),/*#__PURE__*/React.createElement(\"pointLight\",{intensity:0.6,position:[0,10,4]}),/*#__PURE__*/React.createElement(Suspense,{fallback:null},/*#__PURE__*/React.createElement(Tesla,null)),/*#__PURE__*/React.createElement(OrbitControls,{autoRotate:[true]}));}function App(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];useEffect(function(){var interval=setInterval(function(){// console.log('This will run every second!');\nPromise.all([fetch('http://live.canbushack.com/db_get/259/'),// Right Side Doors\nfetch('http://live.canbushack.com/db_get/258/')// Left Side Doors\n]).then(function(responses){// Get a JSON object from each of the responses\nreturn Promise.all(responses.map(function(response){return response.json();}));}).then(function(data){FrontRightLatch=data[0]['VCRIGHT_frontLatchStatus']['enumerated_value'];RearRightLatch=data[0]['VCRIGHT_rearLatchStatus']['enumerated_value'];FrontLeftLatch=data[1]['VCLEFT_frontLatchStatus']['enumerated_value'];RearLeftLatch=data[1]['VCLEFT_rearLatchStatus']['enumerated_value'];trunkLatchStatus=data[0]['VCRIGHT_trunkLatchStatus']['enumerated_value'];// console.log(data)\n}).catch(function(error){console.error(\"Error fetching data: \",error);setError(error);}).finally(function(){setLoading(false);});},1000);return function(){return clearInterval(interval);};},[]);if(loading)return/*#__PURE__*/React.createElement(LoadingScreen,{loading:loading,bgColor:\"#f1f1f1\",spinnerColor:\"#9ee5f8\",textColor:\"#676767\",text:\"Haapi is connecting to our servers\"});if(error)return/*#__PURE__*/React.createElement(LoadingScreen,{loading:loading,bgColor:\"#f1f1f1\",spinnerColor:\"#9ee5f8\",textColor:\"#676767\",text:\"Failed to connect to server\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"img\",{src:logo,className:\"App-logo\",alt:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{id:\"container-md\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:reqUnlock},\"Unlock\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:reqLock},\"Lock\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:reqStart},\"Keyless Drive\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:reqTrunk},\"Trunk\")),/*#__PURE__*/React.createElement(Canvas,{camera:{position:[-5.10923594025578253,2.3585518996952866,-5.686206208293889],near:0.5,far:2000,fov:25,autoRotate:true}},/*#__PURE__*/React.createElement(Scene,null)));}export default App;","map":{"version":3,"sources":["/Users/paris/Documents/canbushack/haapi/src/App.js"],"names":["THREE","React","useState","useEffect","Suspense","OrbitControls","GLTFLoader","Canvas","useFrame","useLoader","LoadingScreen","FrontRightLatch","RearRightLatch","FrontLeftLatch","RearLeftLatch","trunkLatchStatus","reqUnlock","oReq","XMLHttpRequest","addEventListener","open","send","reqLock","reqStart","reqTrunk","Tesla","gltf","scene","scale","set","mixer","animations","partA","partB","partC","partD","partE","AnimationMixer","state","delta","clipA","clipB","clipC","clipD","clipE","clipAction","paused","timeScale","setLoop","LoopOnce","clampWhenFinished","play","update","Scene","App","loading","setLoading","error","setError","interval","setInterval","Promise","all","fetch","then","responses","map","response","json","data","catch","console","finally","clearInterval","logo","position","near","far","fov","autoRotate"],"mappings":"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","sourcesContent":["import * as THREE from \"three\";\nimport React, { useState, useEffect, Suspense } from \"react\";\nimport { OrbitControls } from \"drei\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.css\";\nimport logo from \"./haapi.svg\"\nimport LoadingScreen from 'react-loading-screen'\n\n\n\n\nlet FrontRightLatch;\nlet RearRightLatch;\nlet FrontLeftLatch;\nlet RearLeftLatch;\nlet trunkLatchStatus;\n\n\n\nfunction reqUnlock () {\n  \n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqUnlock);\n  oReq.open(\"GET\", \"http://live.canbushack.com/command/Unlock\");\n  oReq.send();\n  \n\n}\n\nfunction reqLock () {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqLock);\n  oReq.open(\"GET\", \"http://live.canbushack.com/command/Lock\");\n  oReq.send();\n\n}\n\n\nfunction reqStart () {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqStart);\n  oReq.open(\"GET\", \"http://live.canbushack.com/command/Start Vehicle\");\n  oReq.send();\n\n}\n\nfunction reqTrunk () {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqTrunk);\n  oReq.open(\"GET\", \"http://live.canbushack.com/command/Trunk\");\n  oReq.send();\n\n}\n\n\nfunction Tesla() {\n  const gltf = useLoader(GLTFLoader, \"/tesla-w-animations.gltf\");\n  gltf.scene.scale.set(0.005, 0.005, 0.005)\n  \n  let mixer\n  let animations\n  let partA // FRONT RIGHT\n  let partB // REAR RIGHT \n  let partC // FRONT LEFT \n  let partD  // REAR LEFT\n  let partE // TRUNK \n  \n\n\n        animations = gltf.animations\n        mixer = new THREE.AnimationMixer(gltf.scene);\n        // console.log(animations)\n       \n    \n\n    useFrame((state, delta) => {\n\n      const clipA = animations[ 4 ] // FRONT RIGHT \n      const clipB = animations[ 5 ] // REAR RIGHT \n      const clipC = animations[ 2 ] // FRONT RIGHT \n      const clipD = animations[ 3 ] // REAR RIGHT \n      const clipE = animations[ 1 ] // TRUNK\n      \n\n      partA = mixer.clipAction(clipA)\n      if(FrontRightLatch === \"LATCH_OPENED\"){\n        partA.paused = false;\n        partA.timeScale = 1;\n        partA.setLoop(THREE.LoopOnce);\n        partA.clampWhenFinished = true;\n        partA.play()\n      }\n      else if(FrontRightLatch === \"LATCH_CLOSED\"){\n        partA.paused = false;\n        partA.timeScale = -1;\n        partA.setLoop(THREE.LoopOnce);\n        partA.clampWhenFinished = true;\n        partA.play()\n      }\n\n      partB = mixer.clipAction(clipB)\n      if(RearRightLatch === \"LATCH_OPENED\"){\n        partB.paused = false;\n        partB.timeScale = -1;\n        partB.setLoop(THREE.LoopOnce);\n        partB.clampWhenFinished = true;\n        partB.play()\n      }\n      else if(RearRightLatch === \"LATCH_CLOSED\"){\n        partB.paused = false;\n        partB.timeScale = -1;\n        partB.setLoop(THREE.LoopOnce);\n        partB.clampWhenFinished = true;\n        partB.play()\n      }\n\n      partC = mixer.clipAction(clipC)\n      if(FrontLeftLatch === \"LATCH_OPENED\"){\n        partC.paused = false;\n        partC.timeScale = 1;\n        partC.setLoop(THREE.LoopOnce);\n        partC.clampWhenFinished = true;\n        partC.play()\n      }\n      else if(FrontLeftLatch === \"LATCH_CLOSED\"){\n        partC.paused = false;\n        partC.timeScale = -1;\n        partC.setLoop(THREE.LoopOnce);\n        partC.clampWhenFinished = true;\n        partC.play()\n      }\n\n      partD = mixer.clipAction(clipD)\n      if(RearLeftLatch === \"LATCH_OPENED\"){\n        partD.paused = false;\n        partD.timeScale = 1;\n        partD.setLoop(THREE.LoopOnce);\n        partD.clampWhenFinished = true;\n        partD.play()\n      }\n      else if(RearLeftLatch === \"LATCH_CLOSED\"){\n        partD.paused = false;\n        partD.timeScale = -1;\n        partD.setLoop(THREE.LoopOnce);\n        partD.clampWhenFinished = true;\n        partD.play()\n      }\n\n      partE = mixer.clipAction(clipE)\n      if(trunkLatchStatus === \"LATCH_OPENED\"){\n        partE.paused = false;\n        partE.timeScale = 1;\n        partE.setLoop(THREE.LoopOnce);\n        partE.clampWhenFinished = true;\n        partE.play()\n      }\n      else if(trunkLatchStatus === \"LATCH_CLOSED\"){\n        partE.paused = false;\n        partE.timeScale = -1;\n        partE.setLoop(THREE.LoopOnce);\n        partE.clampWhenFinished = true;\n        partE.play()\n      }\n      \n\n      //Update\n        mixer.update(delta)\n    })\n\n  return <primitive position ={[0, 0, 0]} object={gltf.scene} />;\n}\n\n\nfunction Scene() {\n  return (\n    <>\n      <ambientLight />\n      <pointLight intensity={0.6} position={[0, 10, 4]} />\n      <Suspense fallback={null}>\n       \n        <Tesla />\n        \n      </Suspense>\n      <OrbitControls autoRotate = {[true]} />\n      \n\n      \n    </>\n  );\n}\n\n\n\n\n  \n\n\n\n\n\nfunction App() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  \n  \n  useEffect(() => {\n    \n    const interval = setInterval(() => {\n      // console.log('This will run every second!');\n   \n    \n\n    Promise.all([\n      fetch('http://live.canbushack.com/db_get/259/'), // Right Side Doors\n      fetch('http://live.canbushack.com/db_get/258/') // Left Side Doors\n\n      \n      \n  ]).then(function (responses) {\n      // Get a JSON object from each of the responses\n      return Promise.all(responses.map(function (response) {\n          return response.json() ;\n          \n          \n      }))\n  \n      \n  })\n\n  \n  \n  .then(function (data) {\n    FrontRightLatch = data[0]['VCRIGHT_frontLatchStatus']['enumerated_value']\n    RearRightLatch = data[0]['VCRIGHT_rearLatchStatus']['enumerated_value']\n    FrontLeftLatch = data[1]['VCLEFT_frontLatchStatus']['enumerated_value']\n    RearLeftLatch = data[1]['VCLEFT_rearLatchStatus']['enumerated_value']\n    trunkLatchStatus = data[0]['VCRIGHT_trunkLatchStatus']['enumerated_value']\n    // console.log(data)\n    \n  })\n\n\n\n    .catch((error) => {\n    console.error(\"Error fetching data: \", error);\n    setError(error);\n    })\n    .finally(() => {\n    setLoading(false);\n    })}, 1000);\n  \n    return () => clearInterval(interval);\n    }, []);\n    if (loading) return <LoadingScreen\n    loading={loading}\n    bgColor='#f1f1f1'\n    spinnerColor='#9ee5f8'\n    textColor='#676767'\n    text='Haapi is connecting to our servers'\n  >\n    {/* <div style={{ textAlign: 'center' }}>\n      <h1>react-screen-loading</h1>\n      <p>Example of usage loading-screen, based on React</p>\n      \n    </div> */}\n  </LoadingScreen>;\n\n    if (error) return <LoadingScreen\n    loading={loading}\n    bgColor='#f1f1f1'\n    spinnerColor='#9ee5f8'\n    textColor='#676767'\n    text='Failed to connect to server'\n  >\n    {/* <div style={{ textAlign: 'center' }}>\n      <h1>react-screen-loading</h1>\n      <p>Example of usage loading-screen, based on React</p>\n      \n    </div> */}\n  </LoadingScreen>;\n\n    \n\n return (\n\n<>\n    \n    \n    <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n    <div id=\"container-md\">\n    <button  className =\"btn btn-primary\" onClick={reqUnlock}>Unlock</button>\n    <button  className =\"btn btn-primary\" onClick={reqLock}>Lock</button>\n    <button  className =\"btn btn-primary\" onClick={reqStart}>Keyless Drive</button>\n    <button  className =\"btn btn-primary\" onClick={reqTrunk}>Trunk</button>\n\n  </div>\n      <Canvas \n       camera={{\n          position: [-5.10923594025578253, 2.3585518996952866, -5.686206208293889],\n          near: 0.5,\n          far: 2000,\n          fov: 25,\n          autoRotate: true\n        }}\n        >\n   \n   \n        <Scene />\n      </Canvas>\n      \n    \n     </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}