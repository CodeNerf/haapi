{"ast":null,"code":"var _jsxFileName = \"/Users/paris/Desktop/haapi/src/App.js\";\nimport * as THREE from \"three\";\nimport React, { useState, useEffect, Suspense } from \"react\";\nimport { OrbitControls } from \"drei\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.css\";\nimport logo from \"./haapi.svg\";\nimport LoadingScreen from './loading';\nlet FrontRightLatch;\nlet RearRightLatch;\nlet FrontLeftLatch;\nlet RearLeftLatch;\nlet trunkLatchStatus;\n\nfunction reqUnlock() {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqUnlock);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Unlock\");\n  oReq.send();\n}\n\nfunction reqLock() {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqLock);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Lock\");\n  oReq.send();\n}\n\nfunction reqStart() {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqStart);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Start Vehicle\");\n  oReq.send();\n}\n\nfunction reqTrunk() {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqTrunk);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Trunk\");\n  oReq.send();\n}\n\nfunction Tesla() {\n  const gltf = useLoader(GLTFLoader, \"/tesla-w-animations.gltf\");\n  gltf.scene.scale.set(0.005, 0.005, 0.005);\n  let mixer;\n  let animations;\n  let partA; // FRONT RIGHT\n\n  let partB; // REAR RIGHT \n\n  let partC; // FRONT LEFT \n\n  let partD; // REAR LEFT\n\n  let partE; // TRUNK \n\n  animations = gltf.animations;\n  mixer = new THREE.AnimationMixer(gltf.scene); // console.log(animations)\n\n  useFrame((state, delta) => {\n    const clipA = animations[4]; // FRONT RIGHT \n\n    const clipB = animations[5]; // REAR RIGHT \n\n    const clipC = animations[2]; // FRONT RIGHT \n\n    const clipD = animations[3]; // REAR RIGHT \n\n    const clipE = animations[1]; // TRUNK\n\n    partA = mixer.clipAction(clipA);\n\n    if (FrontRightLatch === \"LATCH_OPENED\") {\n      partA.paused = false;\n      partA.timeScale = 1;\n      partA.setLoop(THREE.LoopOnce);\n      partA.clampWhenFinished = true;\n      partA.play();\n    } else if (FrontRightLatch === \"LATCH_CLOSED\") {\n      partA.paused = false;\n      partA.timeScale = -1;\n      partA.setLoop(THREE.LoopOnce);\n      partA.clampWhenFinished = true;\n      partA.play();\n    }\n\n    partB = mixer.clipAction(clipB);\n\n    if (RearRightLatch === \"LATCH_OPENED\") {\n      partB.paused = false;\n      partB.timeScale = 1;\n      partB.setLoop(THREE.LoopOnce);\n      partB.clampWhenFinished = true;\n      partB.play();\n    } else if (RearRightLatch === \"LATCH_CLOSED\") {\n      partB.paused = false;\n      partB.timeScale = -1;\n      partB.setLoop(THREE.LoopOnce);\n      partB.clampWhenFinished = true;\n      partB.play();\n    }\n\n    partC = mixer.clipAction(clipC);\n\n    if (FrontLeftLatch === \"LATCH_OPENED\") {\n      partC.paused = false;\n      partC.timeScale = 1;\n      partC.setLoop(THREE.LoopOnce);\n      partC.clampWhenFinished = true;\n      partC.play();\n    } else if (FrontLeftLatch === \"LATCH_CLOSED\") {\n      partC.paused = false;\n      partC.timeScale = -1;\n      partC.setLoop(THREE.LoopOnce);\n      partC.clampWhenFinished = true;\n      partC.play();\n    }\n\n    partD = mixer.clipAction(clipD);\n\n    if (RearLeftLatch === \"LATCH_OPENED\") {\n      partD.paused = false;\n      partD.timeScale = 1;\n      partD.setLoop(THREE.LoopOnce);\n      partD.clampWhenFinished = true;\n      partD.play();\n    } else if (RearLeftLatch === \"LATCH_CLOSED\") {\n      partD.paused = false;\n      partD.timeScale = -1;\n      partD.setLoop(THREE.LoopOnce);\n      partD.clampWhenFinished = true;\n      partD.play();\n    }\n\n    partE = mixer.clipAction(clipE);\n\n    if (trunkLatchStatus === \"LATCH_OPENED\") {\n      partE.paused = false;\n      partE.timeScale = 1;\n      partE.setLoop(THREE.LoopOnce);\n      partE.clampWhenFinished = true;\n      partE.play();\n    } else if (trunkLatchStatus === \"LATCH_CLOSED\") {\n      partE.paused = false;\n      partE.timeScale = -1;\n      partE.setLoop(THREE.LoopOnce);\n      partE.clampWhenFinished = true;\n      partE.play();\n    } //Update\n\n\n    mixer.update(delta);\n  });\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    position: [0, 0, 0],\n    object: gltf.scene,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 10\n    }\n  });\n}\n\nfunction Scene() {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"ambientLight\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    intensity: 0.6,\n    position: [0, 10, 4],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Suspense, {\n    fallback: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tesla, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(OrbitControls, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction App() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    setTimeout(() => setLoading(false), 6000);\n  }, []);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // console.log('This will run every second!');\n      Promise.all([fetch('http://live.canbushack.com/db_get/259/'), // Right Side Doors\n      fetch('http://live.canbushack.com/db_get/258/') // Left Side Doors\n      ]).then(function (responses) {\n        // Get a JSON object from each of the responses\n        return Promise.all(responses.map(function (response) {\n          return response.json();\n        }));\n      }).then(function (data) {\n        FrontRightLatch = data[0]['VCRIGHT_frontLatchStatus']['enumerated_value'];\n        RearRightLatch = data[0]['VCRIGHT_rearLatchStatus']['enumerated_value'];\n        FrontLeftLatch = data[1]['VCLEFT_frontLatchStatus']['enumerated_value'];\n        RearLeftLatch = data[1]['VCLEFT_rearLatchStatus']['enumerated_value'];\n        trunkLatchStatus = data[0]['VCRIGHT_trunkLatchStatus']['enumerated_value']; // console.log(data)\n      }).catch(error => {\n        console.error(\"Error fetching data: \", error);\n        setError(error);\n      }).finally(() => {\n        setLoading(false);\n      });\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n  if (loading) return \"Application Loading...\";\n  if (error) return \"Error!\";\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"App-logo\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container-md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: reqUnlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 5\n    }\n  }, \"Unlock\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: reqLock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 5\n    }\n  }, \"Lock\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: reqStart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 5\n    }\n  }, \"Keyless Drive\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: reqTrunk,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 5\n    }\n  }, \"Trunk\")), /*#__PURE__*/React.createElement(Canvas, {\n    camera: {\n      position: [-5.10923594025578253, 2.3585518996952866, -5.686206208293889],\n      near: 0.5,\n      far: 2000,\n      fov: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }\n  }, \") : (\", /*#__PURE__*/React.createElement(Scene, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(LoadingScreen, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }\n  }), \")}\");\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/paris/Desktop/haapi/src/App.js"],"names":["THREE","React","useState","useEffect","Suspense","OrbitControls","GLTFLoader","Canvas","useFrame","useLoader","LoadingScreen","FrontRightLatch","RearRightLatch","FrontLeftLatch","RearLeftLatch","trunkLatchStatus","reqUnlock","oReq","XMLHttpRequest","addEventListener","open","send","reqLock","reqStart","reqTrunk","Tesla","gltf","scene","scale","set","mixer","animations","partA","partB","partC","partD","partE","AnimationMixer","state","delta","clipA","clipB","clipC","clipD","clipE","clipAction","paused","timeScale","setLoop","LoopOnce","clampWhenFinished","play","update","Scene","App","loading","setLoading","error","setError","setTimeout","interval","setInterval","Promise","all","fetch","then","responses","map","response","json","data","catch","console","finally","clearInterval","logo","position","near","far","fov"],"mappings":"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","sourcesContent":["import * as THREE from \"three\";\nimport React, { useState, useEffect, Suspense } from \"react\";\nimport { OrbitControls } from \"drei\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.css\";\nimport logo from \"./haapi.svg\"\nimport LoadingScreen from './loading'\n\n\nlet FrontRightLatch;\nlet RearRightLatch;\nlet FrontLeftLatch;\nlet RearLeftLatch;\nlet trunkLatchStatus;\n\n\n\nfunction reqUnlock () {\n  \n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqUnlock);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Unlock\");\n  oReq.send();\n  \n\n}\n\nfunction reqLock () {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqLock);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Lock\");\n  oReq.send();\n\n}\n\n\nfunction reqStart () {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqStart);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Start Vehicle\");\n  oReq.send();\n\n}\n\nfunction reqTrunk () {\n  var oReq = new XMLHttpRequest();\n  oReq.addEventListener(\"load\", reqTrunk);\n  oReq.open(\"GET\", \"http://sla.canbushack.com:5000/command/Trunk\");\n  oReq.send();\n\n}\n\n\nfunction Tesla() {\n  const gltf = useLoader(GLTFLoader, \"/tesla-w-animations.gltf\");\n  gltf.scene.scale.set(0.005, 0.005, 0.005)\n  \n  let mixer\n  let animations\n  let partA // FRONT RIGHT\n  let partB // REAR RIGHT \n  let partC // FRONT LEFT \n  let partD  // REAR LEFT\n  let partE // TRUNK \n  \n\n\n        animations = gltf.animations\n        mixer = new THREE.AnimationMixer(gltf.scene);\n        // console.log(animations)\n       \n    \n\n    useFrame((state, delta) => {\n\n      const clipA = animations[ 4 ] // FRONT RIGHT \n      const clipB = animations[ 5 ] // REAR RIGHT \n      const clipC = animations[ 2 ] // FRONT RIGHT \n      const clipD = animations[ 3 ] // REAR RIGHT \n      const clipE = animations[ 1 ] // TRUNK\n      \n\n      partA = mixer.clipAction(clipA)\n      if(FrontRightLatch === \"LATCH_OPENED\"){\n        partA.paused = false;\n        partA.timeScale = 1;\n        partA.setLoop(THREE.LoopOnce);\n        partA.clampWhenFinished = true;\n        partA.play()\n      }\n      else if(FrontRightLatch === \"LATCH_CLOSED\"){\n        partA.paused = false;\n        partA.timeScale = -1;\n        partA.setLoop(THREE.LoopOnce);\n        partA.clampWhenFinished = true;\n        partA.play()\n      }\n\n      partB = mixer.clipAction(clipB)\n      if(RearRightLatch === \"LATCH_OPENED\"){\n        partB.paused = false;\n        partB.timeScale = 1;\n        partB.setLoop(THREE.LoopOnce);\n        partB.clampWhenFinished = true;\n        partB.play()\n      }\n      else if(RearRightLatch === \"LATCH_CLOSED\"){\n        partB.paused = false;\n        partB.timeScale = -1;\n        partB.setLoop(THREE.LoopOnce);\n        partB.clampWhenFinished = true;\n        partB.play()\n      }\n\n      partC = mixer.clipAction(clipC)\n      if(FrontLeftLatch === \"LATCH_OPENED\"){\n        partC.paused = false;\n        partC.timeScale = 1;\n        partC.setLoop(THREE.LoopOnce);\n        partC.clampWhenFinished = true;\n        partC.play()\n      }\n      else if(FrontLeftLatch === \"LATCH_CLOSED\"){\n        partC.paused = false;\n        partC.timeScale = -1;\n        partC.setLoop(THREE.LoopOnce);\n        partC.clampWhenFinished = true;\n        partC.play()\n      }\n\n      partD = mixer.clipAction(clipD)\n      if(RearLeftLatch === \"LATCH_OPENED\"){\n        partD.paused = false;\n        partD.timeScale = 1;\n        partD.setLoop(THREE.LoopOnce);\n        partD.clampWhenFinished = true;\n        partD.play()\n      }\n      else if(RearLeftLatch === \"LATCH_CLOSED\"){\n        partD.paused = false;\n        partD.timeScale = -1;\n        partD.setLoop(THREE.LoopOnce);\n        partD.clampWhenFinished = true;\n        partD.play()\n      }\n\n      partE = mixer.clipAction(clipE)\n      if(trunkLatchStatus === \"LATCH_OPENED\"){\n        partE.paused = false;\n        partE.timeScale = 1;\n        partE.setLoop(THREE.LoopOnce);\n        partE.clampWhenFinished = true;\n        partE.play()\n      }\n      else if(trunkLatchStatus === \"LATCH_CLOSED\"){\n        partE.paused = false;\n        partE.timeScale = -1;\n        partE.setLoop(THREE.LoopOnce);\n        partE.clampWhenFinished = true;\n        partE.play()\n      }\n      \n\n      //Update\n        mixer.update(delta)\n    })\n\n  return <primitive position ={[0, 0, 0]} object={gltf.scene} />;\n}\n\n\nfunction Scene() {\n  return (\n    <>\n      <ambientLight />\n      <pointLight intensity={0.6} position={[0, 10, 4]} />\n      <Suspense fallback={null}>\n      \n        <Tesla />\n        \n      </Suspense>\n      <OrbitControls />\n\n      \n    </>\n  );\n}\n\n\n\n\n  \n\n\n\n\n\nfunction App() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setTimeout(() => setLoading(false), 6000)\n  }, [])\n  \n  useEffect(() => {\n    \n    const interval = setInterval(() => {\n      // console.log('This will run every second!');\n   \n    \n\n    Promise.all([\n      fetch('http://live.canbushack.com/db_get/259/'), // Right Side Doors\n      fetch('http://live.canbushack.com/db_get/258/') // Left Side Doors\n\n      \n      \n  ]).then(function (responses) {\n      // Get a JSON object from each of the responses\n      return Promise.all(responses.map(function (response) {\n          return response.json() ;\n          \n          \n      }))\n  \n      \n  })\n\n  \n  \n  .then(function (data) {\n    FrontRightLatch = data[0]['VCRIGHT_frontLatchStatus']['enumerated_value']\n    RearRightLatch = data[0]['VCRIGHT_rearLatchStatus']['enumerated_value']\n    FrontLeftLatch = data[1]['VCLEFT_frontLatchStatus']['enumerated_value']\n    RearLeftLatch = data[1]['VCLEFT_rearLatchStatus']['enumerated_value']\n    trunkLatchStatus = data[0]['VCRIGHT_trunkLatchStatus']['enumerated_value']\n    // console.log(data)\n    \n  })\n\n\n\n    .catch((error) => {\n    console.error(\"Error fetching data: \", error);\n    setError(error);\n    })\n    .finally(() => {\n    setLoading(false);\n    })}, 1000);\n  \n    return () => clearInterval(interval);\n    }, []);\n    if (loading) return \"Application Loading...\";\n    if (error) return \"Error!\";\n\n    \n  \n\n return (\n\n    <>\n    \n    \n    <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n    <div id=\"container-md\">\n    <button  className =\"btn btn-primary\" onClick={reqUnlock}>Unlock</button>\n    <button  className =\"btn btn-primary\" onClick={reqLock}>Lock</button>\n    <button  className =\"btn btn-primary\" onClick={reqStart}>Keyless Drive</button>\n    <button  className =\"btn btn-primary\" onClick={reqTrunk}>Trunk</button>\n\n  </div>\n      <Canvas \n       camera={{\n          position: [-5.10923594025578253, 2.3585518996952866, -5.686206208293889],\n          near: 0.5,\n          far: 2000,\n          fov: 25,\n\n         \n         \n        }}\n        >\n   \n       ) : (\n        <Scene />\n      </Canvas>\n      <LoadingScreen />\n    )}\n     </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}